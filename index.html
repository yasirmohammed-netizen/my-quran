<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØµØ­Ù Ø§Ù„Ù‡Ø¯Ø§ÙŠØ© - Ø§Ù„Ø®Ø· Ø§Ù„Ø¹Ø«Ù…Ø§Ù†ÙŠ ÙˆØ§Ù„ØªÙØ³ÙŠØ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c5d3f; /* Ø£Ø®Ø¶Ø± Ù…Ù„ÙƒÙŠ */
            --bg-color: #fdfaf0;     /* Ù„ÙˆÙ† ÙˆØ±Ù‚ÙŠ */
        }

        body {
            font-family: 'Amiri', serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.05);
            border: 1px solid #e2d7b5;
        }

        header {
            text-align: center;
            border-bottom: 2px solid var(--primary-color);
            margin-bottom: 30px;
            padding-bottom: 20px;
        }

        h1 { color: var(--primary-color); font-size: 2.8rem; margin: 0; }

        #surah-select {
            width: 100%;
            padding: 15px;
            font-size: 1.3rem;
            font-family: 'Amiri', serif;
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            background: #fff;
            color: var(--primary-color);
            cursor: pointer;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¢ÙŠØ§Øª */
        #quran-display {
            line-height: 3;
            font-size: 2rem;
            text-align: justify;
            direction: rtl;
            padding: 20px;
        }

        .ayah {
            cursor: pointer;
            transition: 0.3s;
            display: inline;
        }

        .ayah:hover { background: #f1c40f33; text-decoration: underline; }

        .ayah-num {
            color: var(--primary-color);
            font-size: 1.2rem;
            margin: 0 5px;
            border: 1px solid var(--primary-color);
            border-radius: 50%;
            padding: 2px 8px;
            font-family: Arial, sans-serif; /* Ù„ÙŠÙƒÙˆÙ† Ø§Ù„Ø±Ù‚Ù… ÙˆØ§Ø¶Ø­Ø§Ù‹ */
        }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙØ³ÙŠØ± (Modal) */
        #modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        #tafseer-box {
            background: white;
            width: 90%;
            max-width: 600px;
            padding: 30px;
            border-radius: 15px;
            position: relative;
            text-align: right;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        #tafseer-box h3 { color: var(--primary-color); margin-top: 0; }
        #tafseer-content { font-size: 1.3rem; line-height: 1.8; color: #555; }
        
        .close-btn {
            position: absolute;
            top: 10px; left: 10px;
            background: #e74c3c;
            color: white; border: none;
            padding: 5px 12px; border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ù…ÙŠØ³Ø±</p>
        </header>

        <select id="surah-select">
            <option value="">â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙ‡Ø±Ø³...</option>
        </select>

        <div id="quran-display"></div>
    </div>

    <div id="modal-overlay">
        <div id="tafseer-box">
            <button class="close-btn" onclick="closeTafseer()">Ø¥ØºÙ„Ø§Ù‚ X</button>
            <h3 id="tafseer-title">ØªÙØ³ÙŠØ± Ø§Ù„Ø¢ÙŠØ©</h3>
            <p id="ayah-text-preview" style="font-style: italic; color: #888; border-bottom: 1px solid #eee; padding-bottom: 10px;"></p>
            <div id="tafseer-content">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ±...</div>
        </div>
    </div>

    <script>
        const select = document.getElementById('surah-select');
        const display = document.getElementById('quran-display');
        const overlay = document.getElementById('modal-overlay');

        // 1. Ø¬Ù„Ø¨ Ø§Ù„ÙÙ‡Ø±Ø³
        async function loadIndex() {
            const res = await fetch('https://api.alquran.cloud/v1/surah');
            const data = await res.json();
            select.innerHTML = '<option value="">ğŸ“– Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø¬ÙˆØ©...</option>';
            data.data.forEach(s => {
                const opt = document.createElement('option');
                opt.value = s.number;
                opt.textContent = `${s.number}. ${s.name}`;
                select.appendChild(opt);
            });
        }

        // 2. Ø¬Ù„Ø¨ Ø§Ù„Ø³ÙˆØ±Ø©
        select.onchange = async (e) => {
            if(!e.target.value) return;
            display.innerHTML = "Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢ÙŠØ§Øª Ø¨Ø§Ù„Ø®Ø· Ø§Ù„Ø¹Ø«Ù…Ø§Ù†ÙŠ...";
            const res = await fetch(`https://api.alquran.cloud/v1/surah/${e.target.value}`);
            const data = await res.json();
            renderSurah(data.data);
        };

        function renderSurah(surah) {
            display.innerHTML = `<h2 style="text-align:center; color:#2c5d3f;">ï´¿ ${surah.name} ï´¾</h2>`;
            surah.ayahs.forEach(ayah => {
                const span = document.createElement('span');
                span.className = 'ayah';
                span.innerHTML = `${ayah.text} <span class="ayah-num">${ayah.numberInSurah}</span> `;
                // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· ÙŠÙØªØ­ Ø§Ù„ØªÙØ³ÙŠØ±
                span.onclick = () => showTafseer(surah.number, ayah.numberInSurah, ayah.text);
                display.appendChild(span);
            });
        }

        // 3. Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ± (Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ù…ÙŠØ³Ø±)
        async function showTafseer(sNum, aNum, text) {
            overlay.style.display = 'flex';
            document.getElementById('ayah-text-preview').textContent = text;
            document.getElementById('tafseer-content').textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
            
            try {
                // Ù†Ø³ØªØ®Ø¯Ù… API Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ù…ÙŠØ³Ø± (ar.muyassar)
                const res = await fetch(`https://api.alquran.cloud/v1/ayah/${sNum}:${aNum}/ar.muyassar`);
                const data = await res.json();
                document.getElementById('tafseer-content').textContent = data.data.text;
                document.getElementById('tafseer-title').textContent = `ØªÙØ³ÙŠØ± Ø§Ù„Ø¢ÙŠØ© Ø±Ù‚Ù… ${aNum}`;
            } catch (err) {
                document.getElementById('tafseer-content').textContent = "Ø¹Ø°Ø±Ø§Ù‹ØŒ ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ± Ø­Ø§Ù„ÙŠØ§Ù‹.";
            }
        }

        function closeTafseer() { overlay.style.display = 'none'; }
        
        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
        window.onclick = (e) => { if(e.target == overlay) closeTafseer(); }

        loadIndex();
    </script>
</body>
</html>
