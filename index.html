<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØµØ­Ù Ø§Ù„Ù‡Ø¯Ø§ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠ</title>
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ù…Ø§Ù„ÙŠ */
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: #fdfbf7; color: #2c3e50; margin: 0; padding: 20px; }
        .container { max-width: 850px; margin: 0 auto; background: #ffffff; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); border: 1px solid #e0d8c3; }
        header { text-align: center; margin-bottom: 30px; border-bottom: 3px double #27ae60; padding-bottom: 20px; }
        h1 { color: #27ae60; font-size: 2.5rem; margin: 0; }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³ÙˆØ± */
        #surah-select { width: 100%; padding: 15px; font-size: 1.2rem; border-radius: 12px; border: 2px solid #27ae60; background: #fff; cursor: pointer; outline: none; transition: 0.3s; }
        #surah-select:focus { box-shadow: 0 0 10px rgba(39, 174, 96, 0.2); }

        /* Ø¹Ø±Ø¶ Ø§Ù„Ø¢ÙŠØ§Øª */
        #quran-display { line-height: 2.8; font-size: 1.8rem; text-align: justify; margin-top: 30px; min-height: 400px; padding: 20px; border-radius: 10px; background: #fffcf5; }
        .ayah { cursor: pointer; transition: 0.2s; padding: 0 5px; border-radius: 5px; }
        .ayah:hover { background-color: #f1c40f33; }
        .ayah-num { color: #27ae60; font-weight: bold; font-size: 1.1rem; margin: 0 8px; border: 1px solid #27ae60; border-radius: 50%; padding: 2px 8px; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© */
        #bookmark-status { background: #e8f5e9; padding: 15px; border-radius: 12px; margin-bottom: 20px; display: none; align-items: center; justify-content: space-between; border: 1px solid #c8e6c9; }
        .btn-go { background: #27ae60; color: white; border: none; padding: 8px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        
        .loading { text-align: center; color: #7f8c8d; font-style: italic; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
            <div id="bookmark-status"></div>
        </header>

        <select id="surah-select">
            <option value="">â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙ‡Ø±Ø³...</option>
        </select>

        <main id="quran-display">
            <p class="loading">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø³ÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©..</p>
        </main>
    </div>

    <script>
        const selectElement = document.getElementById('surah-select');
        const displayElement = document.getElementById('quran-display');
        const bookmarkBar = document.getElementById('bookmark-status');

        // 1. ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙ‡Ø±Ø³ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        async function fetchSurahs() {
            try {
                const response = await fetch('https://api.alquran.cloud/v1/surah');
                const data = await response.json();
                selectElement.innerHTML = '<option value="">ğŸ“– Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø¬ÙˆØ©...</option>';
                data.data.forEach(surah => {
                    const option = document.createElement('option');
                    option.value = surah.number;
                    option.textContent = `${surah.number}. ${surah.name}`;
                    selectElement.appendChild(option);
                });
            } catch (error) {
                selectElement.innerHTML = '<option>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„!</option>';
            }
        }

        // 2. ØªØ­Ù…ÙŠÙ„ Ø¢ÙŠØ§Øª Ø§Ù„Ø³ÙˆØ±Ø©
        async function loadSurahContent(number) {
            if (!number) return;
            displayElement.innerHTML = '<p class="loading">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¢ÙŠØ§Øª Ø§Ù„ÙƒØ±ÙŠÙ…Ø©...</p>';
            const response = await fetch(`https://api.alquran.cloud/v1/surah/${number}`);
            const data = await response.json();
            renderSurah(data.data);
        }

        // 3. Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙˆØ±Ø© ÙÙŠ Ø§Ù„ØµÙØ­Ø©
        function renderSurah(surah) {
            displayElement.innerHTML = `<h2 style="text-align:center; color:#2c3e50;">ï´¿ ${surah.name} ï´¾</h2>`;
            surah.ayahs.forEach(ayah => {
                const span = document.createElement('span');
                span.className = 'ayah';
                span.innerHTML = `${ayah.text} <span class="ayah-num">${ayah.numberInSurah}</span> `;
                
                // Ø­ÙØ¸ Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ©
                span.onclick = () => {
                    const bookmark = { name: surah.name, sNum: surah.number, aNum: ayah.numberInSurah };
                    localStorage.setItem('quran_bookmark', JSON.stringify(bookmark));
                    updateBookmarkUI();
                    alert(`ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¹Ù„Ø§Ù…Ø©: ${surah.name} - Ø¢ÙŠØ© ${ayah.numberInSurah}`);
                };
                displayElement.appendChild(span);
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 4. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©
        function updateBookmarkUI() {
            const saved = JSON.parse(localStorage.getItem('quran_bookmark'));
            if (saved) {
                bookmarkBar.style.display = 'flex';
                bookmarkBar.innerHTML = `
                    <span>ğŸ“ ÙˆØµÙ„Øª Ø¥Ù„Ù‰: <b>${saved.name}</b> (Ø¢ÙŠØ© ${saved.aNum})</span>
                    <button class="btn-go" onclick="loadSurahContent(${saved.sNum})">Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ø±ÙŠØ¹</button>
                `;
            }
        }

        selectElement.onchange = (e) => loadSurahContent(e.target.value);
        fetchSurahs();
        updateBookmarkUI();
    </script>
</body>
</html>
